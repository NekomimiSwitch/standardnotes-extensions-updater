# Settings in the [build] context are global and are applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  [build.environment]
    PYTHON_VERSION = "3.8"

  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  base = "./"

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, include it in the publish directory path.
  publish = "build/public/"

  # Default build command.
  command = "bash update.sh"

# A basic redirect rule
[[redirects]]
  from = "/"
  to = "https://docs.standardnotes.com/self-hosting"
  status = 200

[[headers]]
  # Define which paths this specific [[headers]] block will cover.
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    Content-Security-Policy = "object-src 'none'; script-src 'none'; base-url 'none'; frame-ancestors 'none'"

[[headers]]
  for = "/extensions/*"
  [headers.values]
    Access-Control-Allow-Origin = "*"
    Access-Control-Allow-Methods = "GET, POST, OPTIONS"
    Access-Control-Allow-Headers = "DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,X-Application-Version,X-SNJS-Version"
    Access-Control-Expose-Headers = "Content-Length,Content-Range"
    Access-Control-Max-Age = "1728000"
